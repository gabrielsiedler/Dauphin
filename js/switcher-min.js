(function(a){a.fn.navs=function(b){return this.each(function(){var c=a(this),d=c.data("navs"),e={enable:!0,actCl:"active",changeEv:"change",indx:[],hshx:[],useHash:!0,defHash:"#!/page_main",emptyHash:"#",outerHash:!1,autoPlay:!1,blockSame:!0,hover:!0,contRetFalse:!0,preFu:function(){e.li.each(function(b){var c=a(this);e.indx[b]=c,e.useHash&&(e.hshx[b]=a("a",c).attr("href"))&&location.hash==e.hshx[b]&&c.addClass(e.actCl)})},rfrshFu:function(){e.prev=e.curr,e.pren=e.n,e.curr=!1,e.n=-1,e.param="close",e.li.each(function(b){var c=a(this);c.hasClass(e.actCl)&&(e.curr=c,e.n=b,e.href=a("a",c).attr("href"),e.param=e.useHash?e.href:e.n)})},markFu:function(){e.li.each(function(b){var c=a(this);e.n==b?e.hvrin(c):e.hvrout(c)})},hashFu:function(){a(window).bind("hashchange",function(){if(location.hash==e.emptyHash||location.hash.length==0)return location.hash=e.hash,!1;e.prevHash=e.hash,e.checkHashFu(e.outerHash=e.hash=location.hash)}),a("a",e.li).click(function(){if(!e.enable)return!1})},checkHashFu:function(a){if(a==e.emptyHash||a.length==0)location.hash=e.defHash;if(a=="#back")return e.backFu();if(a=="#close")return e.closeFu();e.li.each(function(a){e.hshx[a]==e.hash&&(e.chngFu(a),e.outerHash=!1)}),e.outerHash&&(e.li.removeClass(e.actCl),e.rfrshFu(),e.markFu(),e.param=e.outerHash,e.me.trigger(e.changeEv))},cntrFu:function(){e.li.each(function(b){var c=a(this);a("a",c).click(function(){e.chngFu(b);if(e.contRetFalse)return!1})})},autoPlayFu:function(){if(!e.autoPlay)return!1;e.int&&clearInterval(e.int),e.int=setInterval(e.nextFu,e.autoPlay)},chngFu:function(a){if(!e.enable)return!1;if(a==e.n&&e.blockSame)return!1;e.indx[a]&&e.li.removeClass(e.actCl)&&e.indx[a].addClass(e.actCl),e.rfrshFu(),e.markFu(),e.autoPlayFu(),e.useHash&&location.hash!=e.hshx[e.n]&&(location.hash=e.hshx[e.n]),e.me.trigger(e.changeEv)},closeFu:function(){e.li.removeClass(e.actCl),e.rfrshFu(),e.markFu(),e.me.trigger(e.changeEv),location.hash=e.defHash},backFu:function(){e.chngFu(e.pren)},nextFu:function(){var a=e.n;e.chngFu(++a<e.li.length?a:0)},prevFu:function(){var a=e.n;e.chngFu(--a>=0?a:e.li.length-1)},customStr:function(a){},init:function(){e.li=a(">ul>li",e.me),e.preFu(),e.rfrshFu(),e.markFu(),e.useHash?e.hashFu():e.cntrFu(),e.hoverFu(),e.autoPlayFu(),e.useHash&&e.checkHashFu(e.outerHash=e.hash=location.hash),e.li.hasClass(e.actCl)&&e.me.trigger(e.changeEv)},hoverFu:function(){e.li.each(function(b){var c=a(this);a("a",c).bind("mouseenter",function(){e.enable&&e.hover&&b!=e.n&&e.hvrin(c)}).bind("mouseleave",function(){e.enable&&e.hover&&b!=e.n&&e.hvrout(c)})})},hvrin:function(b){e.hoverIn(b,e),e.hover=="sprites"&&a("a",b).sprites("hoverin")},hvrout:function(b){e.hoverOut(b,e),e.hover=="sprites"&&a("a",b).sprites("hoverout")},hoverIn:function(){},hoverOut:function(){},defFunc:function(){}};d?e=d:c.data({navs:e}),typeof b=="object"&&a.extend(e,b);if(typeof b=="function")return c.bind(e.changeEv,function(){return b(e.param,e),!1}).trigger(e.changeEv);e.me||e.init(e.me=c),typeof b=="number"&&e.chngFu(b),typeof b=="boolean"&&(e.enable=b),typeof b=="string"&&(b=="prev"||b=="next"||b=="close"||b=="back"?e[b+"Fu"]():e.useHash?b.slice(0,3)=="#!/"&&(location.hash=b)||e.customStr(b):e.customStr(b))}),this},a.fn.tabs=function(b){return this.each(function(){var c=a(this),d=c.data("tabs")||{enable:!0,show:0,blockSame:!0,changeEv:"change",empty:"#!/",preFu:function(){d.li.hide()},actFu:function(){d.prev&&d.prev.hide(),d.curr&&d.curr.show()},navFu:function(b){if(d.pres==b||b.slice(0,3)!="#!/")return!1;d.pres=b,b==d.empty&&a.when(d.li).then(d.closeFu),d.li.each(function(c){a(this).attr("id")==b.slice(3)&&d.chngFu(c)})},chngFu:function(b){if(!d.enable||b==d.n&&d.blockSame||b>=d.li.length)return!1;a.when(d.li).then(function(){d.pren=d.n,d.prev=d.curr,d.curr=d.li.eq(d.n=b),d.actFu(d),d.me.trigger(d.changeEv)})},nextFu:function(){var a=d.n;d.way=1,d.chngFu(++a<d.li.length-d.show?a:0)},prevFu:function(){var a=d.n;d.way=-1,d.chngFu(--a>=0?a:d.li.length-1-d.show)},closeFu:function(){if(d.pres=="close")return!1;d.pren=d.n,d.prev=d.curr,d.n=-1,d.curr=!1,d.pres="close",d.actFu(d)},backFu:function(){d.chngFu(d.pren)},init:function(){d.ul=a(">ul",d.me),d.li=a(">li",d.ul),d.preFu(d),d.navs&&d.navs.navs(function(a){c.tabs(a)})}};typeof b=="object"&&(d=a.extend(!0,d,b)),d.me||d.init(d.me=c.data({tabs:d})),typeof b=="function"&&d.me.bind(d.changeEv,function(){return b(d.n,d),!1}),typeof b=="boolean"&&(d.enable=b),typeof b=="number"&&d.chngFu(b),typeof b=="string"&&(b=="prev"||b=="next"||b=="close"||b=="back"?d[b+"Fu"]():d.navFu(b))})}})(jQuery)